# 📊 训练数据说明

## 数据格式

训练数据使用 JSON 格式，每条数据包含三个字段：

```json
{
  "instruction": "用户问：问题内容",
  "input": "",
  "output": "客服回答内容"
}
```

### 字段说明

| 字段 | 说明 | 是否必需 |
|------|------|---------|
| instruction | 用户的问题，建议加"用户问："前缀 | ✅ 必需 |
| input | 额外的输入信息（通常为空） | ✅ 必需（可为空字符串） |
| output | 客服的标准回答 | ✅ 必需 |

---

## 示例数据

### 示例 1：退货咨询

```json
{
  "instruction": "用户问：如何退货？",
  "input": "",
  "output": "您好！退货流程如下：\n1. 登录您的账户\n2. 进入"我的订单"页面\n3. 选择需要退货的商品\n4. 点击"申请退货"\n5. 填写退货原因\n6. 等待审核（1-2个工作日）\n\n如有疑问，请联系在线客服或拨打 400-xxx-xxxx"
}
```

### 示例 2：物流查询

```json
{
  "instruction": "用户问：如何查询物流？",
  "input": "",
  "output": "您好！查询物流的方法：\n1. 登录账户\n2. 进入"我的订单"\n3. 点击"查看物流"\n4. 即可看到实时物流信息\n\n也可以直接在快递公司官网输入运单号查询。"
}
```

---

## 数据准备建议

### 1. 数据来源

- ✅ 真实的客服对话记录
- ✅ 常见问题 FAQ
- ✅ 客服手册
- ✅ 用户反馈
- ❌ 避免虚构或不准确的信息

### 2. 数据质量

**好的数据特征**：
- ✅ 回答专业、准确
- ✅ 语气友好、礼貌
- ✅ 结构清晰（使用编号、分点）
- ✅ 包含具体信息（时间、流程、联系方式）
- ✅ 统一的风格和格式

**避免的问题**：
- ❌ 回答模糊不清
- ❌ 信息错误或过时
- ❌ 语气不当
- ❌ 格式混乱
- ❌ 前后矛盾

### 3. 数据量建议

| 数据量 | 效果 | 适用场景 |
|--------|------|---------|
| 10-50条 | 基础 | 快速测试 |
| 50-100条 | 良好 | 小型客服 |
| 100-500条 | 优秀 | 中型客服 |
| 500+条 | 专业 | 大型客服 |

---

## 数据扩充方法

### 方法 1：同义改写

原始问题：
```json
{"instruction": "用户问：如何退货？", ...}
```

扩充：
```json
{"instruction": "用户问：怎么退货？", ...}
{"instruction": "用户问：退货流程是什么？", ...}
{"instruction": "用户问：我想退货怎么办？", ...}
```

### 方法 2：场景细化

通用问题：
```json
{"instruction": "用户问：发货需要多久？", ...}
```

细化：
```json
{"instruction": "用户问：现货商品多久发货？", ...}
{"instruction": "用户问：预售商品什么时候发货？", ...}
{"instruction": "用户问：定制商品发货时间？", ...}
```

### 方法 3：添加上下文

基础问题：
```json
{"instruction": "用户问：可以修改地址吗？", ...}
```

添加上下文：
```json
{
  "instruction": "用户问：订单已经下了，可以修改收货地址吗？",
  "input": "",
  "output": "..."
}
```

---

## 数据组织

### 训练集（train.json）

- 包含大部分数据（80-90%）
- 覆盖所有常见问题类型
- 当前提供：10 条示例

### 验证集（dev.json）

- 包含少量数据（10-20%）
- 用于评估训练效果
- 当前提供：2 条示例

### 建议比例

```
总数据 100 条：
├── train.json: 80-90 条
└── dev.json: 10-20 条
```

---

## 添加新数据

### 步骤 1：编辑 JSON 文件

打开 `train.json`，添加新的对话对：

```json
[
  {
    "instruction": "用户问：你的新问题",
    "input": "",
    "output": "你的标准回答"
  },
  ...现有数据...
]
```

### 步骤 2：检查格式

确保：
- ✅ JSON 格式正确（使用 JSON 验证工具）
- ✅ 所有字段都存在
- ✅ 没有语法错误

### 步骤 3：重新训练

```bash
python chatglm_lora_finetune.py
```

---

## 数据模板

### 客服回答模板

```
您好！[问题回答]

[详细说明]
1. 步骤一
2. 步骤二
3. 步骤三

[补充信息]

如有疑问，请联系[联系方式]
```

### 示例应用

```json
{
  "instruction": "用户问：如何申请发票？",
  "input": "",
  "output": "您好！申请发票流程：\n\n1. 下单时勾选"需要发票"\n2. 填写发票信息（抬头、税号等）\n3. 选择发票类型（电子/纸质）\n4. 发票将随货寄出或发送到邮箱\n\n如需补开发票，请联系客服。"
}
```

---

## 常见问题类型

### 1. 订单相关
- 下单流程
- 订单修改
- 订单取消
- 订单查询

### 2. 支付相关
- 支付方式
- 支付问题
- 发票申请
- 退款流程

### 3. 物流相关
- 发货时间
- 物流查询
- 配送范围
- 签收问题

### 4. 售后相关
- 退货流程
- 换货政策
- 质量问题
- 售后保障

### 5. 会员相关
- 会员权益
- 积分使用
- 优惠券
- 等级说明

---

## 数据质量检查清单

训练前检查：

- [ ] JSON 格式正确
- [ ] 所有字段完整
- [ ] 没有重复数据
- [ ] 回答准确无误
- [ ] 语气统一友好
- [ ] 格式清晰规范
- [ ] 信息完整具体
- [ ] 没有敏感信息

---

## 持续优化

### 1. 收集反馈

- 记录用户常问的问题
- 收集回答不准确的情况
- 分析用户满意度

### 2. 补充数据

- 添加新的问题类型
- 完善现有回答
- 更新过时信息

### 3. 定期重训

- 每周/月更新数据
- 重新训练模型
- 评估效果提升

---

**准备好数据后，运行 `开始训练.bat` 开始训练！** 🚀
