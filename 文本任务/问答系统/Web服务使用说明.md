# 🌐 问答系统 Web 服务使用说明

## 🎯 功能特点

- ✅ **美观的网页界面**：现代化设计，响应式布局
- ✅ **实时问答**：输入上下文和问题，立即获得答案
- ✅ **置信度显示**：可视化展示模型的置信度
- ✅ **示例问题**：内置示例，一键加载测试
- ✅ **自动模型选择**：优先使用最好的训练模型
- ✅ **API 接口**：支持程序化调用

---

## 🚀 快速开始

### 方法 1：双击启动（最简单）

1. 双击 `启动Web服务.bat`
2. 等待服务启动（约 10-30 秒）
3. 在浏览器中打开 `http://127.0.0.1:5000`

### 方法 2：命令行启动

```bash
cd 实战训练\文本任务\问答系统
D:\aaaalokda\envs\myenv\python.exe 问答系统Web服务.py
```

---

## 📱 使用界面

### 主界面

```
┌─────────────────────────────────────────┐
│        🤖 智能问答系统                   │
│   基于 Transformers 的中文问答模型       │
├─────────────────────────────────────────┤
│ 模型: BERT 优化版  设备: GPU  状态: 已加载│
├─────────────────────────────────────────┤
│                                         │
│ 📄 上下文（Context）                     │
│ ┌─────────────────────────────────────┐ │
│ │ 请输入包含答案的上下文内容...         │ │
│ │                                     │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ ❓ 问题（Question）                      │
│ ┌─────────────────────────────────────┐ │
│ │ 请输入你的问题...                    │ │
│ └─────────────────────────────────────┘ │
│                                         │
│        [ 🔍 获取答案 ]                   │
│                                         │
│ ✨ 答案                                  │
│ ┌─────────────────────────────────────┐ │
│ │ 中华人民共和国的首都                 │ │
│ └─────────────────────────────────────┘ │
│ 置信度: ████████░░ 82.5%                │
│                                         │
│ 💡 示例问题                              │
│ • 示例 1: 地理知识                       │
│ • 示例 2: 历史知识                       │
│ • 示例 3: 科技知识                       │
└─────────────────────────────────────────┘
```

---

## 🎮 使用步骤

### 1. 输入上下文

在「上下文」文本框中输入包含答案的文本内容。

**示例**：
```
北京是中华人民共和国的首都，是全国的政治中心、文化中心。
北京位于华北平原北部，背靠燕山，毗邻天津市和河北省。
```

### 2. 输入问题

在「问题」文本框中输入你想问的问题。

**示例**：
```
北京是什么？
```

### 3. 获取答案

点击「🔍 获取答案」按钮，系统会：
1. 分析上下文
2. 理解问题
3. 从上下文中提取答案
4. 显示答案和置信度

### 4. 查看结果

答案会显示在下方，包括：
- ✨ **答案文本**：从上下文中提取的答案
- 📊 **置信度**：模型对答案的确信程度（0-100%）

---

## 💡 示例问题

点击示例问题可以快速加载测试数据：

### 示例 1：地理知识
- **上下文**：北京的介绍
- **问题**：北京是什么？
- **预期答案**：中华人民共和国的首都

### 示例 2：历史知识
- **上下文**：长城的历史
- **问题**：谁修建了万里长城？
- **预期答案**：秦始皇

### 示例 3：科技知识
- **上下文**：深度学习的发展
- **问题**：深度学习在哪一年取得突破？
- **预期答案**：2012年

---

## 🔌 API 接口

### 问答接口

**端点**：`POST /api/answer`

**请求**：
```json
{
  "context": "北京是中华人民共和国的首都...",
  "question": "北京是什么？"
}
```

**响应**：
```json
{
  "success": true,
  "answer": "中华人民共和国的首都",
  "score": 0.8532,
  "time": "0.15s"
}
```

### 模型信息接口

**端点**：`GET /api/info`

**响应**：
```json
{
  "name": "BERT 优化版",
  "path": "中文问答模型_BERT优化版",
  "device": "GPU",
  "status": "已加载"
}
```

---

## 💻 程序化调用

### Python 示例

```python
import requests

url = "http://127.0.0.1:5000/api/answer"

data = {
    "context": "北京是中华人民共和国的首都，是全国的政治中心。",
    "question": "北京是什么？"
}

response = requests.post(url, json=data)
result = response.json()

if result['success']:
    print(f"答案: {result['answer']}")
    print(f"置信度: {result['score']:.2%}")
else:
    print(f"错误: {result['error']}")
```

### JavaScript 示例

```javascript
fetch('http://127.0.0.1:5000/api/answer', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify({
        context: '北京是中华人民共和国的首都...',
        question: '北京是什么？'
    })
})
.then(response => response.json())
.then(data => {
    if (data.success) {
        console.log('答案:', data.answer);
        console.log('置信度:', data.score);
    }
});
```

---

## 🎨 界面特点

### 1. 渐变背景
- 紫色渐变背景，视觉效果优雅

### 2. 卡片式设计
- 白色卡片，圆角边框
- 阴影效果，层次分明

### 3. 响应式布局
- 自适应不同屏幕尺寸
- 移动端友好

### 4. 动画效果
- 按钮悬停效果
- 加载动画
- 置信度条动画

### 5. 颜色编码
- 🟢 高置信度（>50%）：蓝紫色
- 🟡 中等置信度（20-50%）：橙色
- 🔴 低置信度（<20%）：红色

---

## ⚙️ 模型选择

服务会按以下优先级自动选择模型：

1. **中文问答模型_BERT优化版**（最优）
2. **中文问答模型_高级版**
3. **中文问答模型**（简单版）
4. **bert-base-chinese**（预训练模型）

---

## 🔧 配置选项

### 修改端口

在 `问答系统Web服务.py` 最后一行修改：

```python
app.run(host='0.0.0.0', port=5000, debug=False)
#                            ^^^^
#                            改为其他端口，如 8080
```

### 局域网访问

服务默认监听 `0.0.0.0`，局域网内其他设备可以通过你的 IP 访问：

```
http://你的IP地址:5000
```

查看 IP 地址：
```bash
ipconfig
```

---

## 💡 使用技巧

### 1. 提供清晰的上下文
- 上下文应该包含问题的答案
- 避免过长或无关的内容

### 2. 问题要具体
- ✅ 好：「北京是什么？」
- ❌ 差：「告诉我关于北京的一切」

### 3. 理解置信度
- >50%：答案很可能正确
- 20-50%：答案可能正确，需要验证
- <20%：答案不确定，可能不准确

### 4. 多次尝试
- 如果答案不理想，尝试重新表述问题
- 或者提供更清晰的上下文

---

## 🐛 常见问题

### Q: 服务启动失败？

A: 检查：
1. Python 环境是否正确
2. Flask 是否已安装：`pip install flask`
3. 端口 5000 是否被占用

### Q: 模型加载失败？

A: 确保至少有一个训练好的模型：
- 运行 `简单训练示例.py` 或
- 运行 `高级训练示例.py`

### Q: 答案不准确？

A: 可能原因：
1. 上下文中没有答案
2. 问题表述不清
3. 模型训练不足（使用优化版模型）

### Q: 置信度很低？

A: 建议：
1. 使用 BERT 优化版模型
2. 提供更清晰的上下文
3. 重新表述问题

---

## 📊 性能说明

| 配置 | 响应时间 |
|------|---------|
| GPU (RTX 3070) | 0.1-0.3 秒 |
| CPU (16核) | 0.5-1.5 秒 |

---

## 🔒 安全提示

- 服务默认监听所有网络接口（0.0.0.0）
- 如果只需本地访问，改为 `127.0.0.1`
- 生产环境建议使用 HTTPS
- 添加身份验证和访问控制

---

## 📝 更新日志

### v1.0.0
- ✅ 初始版本
- ✅ 网页界面
- ✅ API 接口
- ✅ 自动模型选择
- ✅ 示例问题

---

**准备好了吗？双击 `启动Web服务.bat` 开始使用！** 🚀
