# ğŸš€ é—®ç­”ç³»ç»Ÿè®­ç»ƒ - å¿«é€Ÿå¼€å§‹

## ğŸ“‹ å‡†å¤‡å·¥ä½œ

### 1. å®‰è£…ä¾èµ–

```bash
cd å®æˆ˜è®­ç»ƒ\æ–‡æœ¬ä»»åŠ¡\é—®ç­”ç³»ç»Ÿ
pip install -r requirements.txt
```

### 2. ç¡®è®¤ç¯å¢ƒ

- Python ç¯å¢ƒ: `D:\aaaalokda\envs\myenv\python.exe`
- GPU: NVIDIA GeForce RTX 3070 (æ¨è)
- æ¨¡å‹ç¼“å­˜: `D:\transformersè®­ç»ƒ\transformers-main\é¢„è®­ç»ƒæ¨¡å‹ä¸‹è½½å¤„`

---

## ğŸ¯ æ–¹æ³•ä¸€ï¼šä½¿ç”¨ç®€åŒ–è„šæœ¬ï¼ˆæ¨èæ–°æ‰‹ï¼‰

### è®­ç»ƒæ¨¡å‹

åŒå‡»è¿è¡Œï¼š
```
å¼€å§‹è®­ç»ƒ.bat
```

æˆ–å‘½ä»¤è¡Œï¼š
```bash
D:\aaaalokda\envs\myenv\python.exe ç®€å•è®­ç»ƒç¤ºä¾‹.py
```

### ä½¿ç”¨æ¨¡å‹

```bash
D:\aaaalokda\envs\myenv\python.exe ä½¿ç”¨æ¨¡å‹.py
```

---

## ğŸ¯ æ–¹æ³•äºŒï¼šä½¿ç”¨å®˜æ–¹è„šæœ¬ï¼ˆå®Œæ•´åŠŸèƒ½ï¼‰

### åŸºç¡€è®­ç»ƒï¼ˆBERT + SQuADï¼‰

```bash
python run_qa.py \
  --model_name_or_path bert-base-uncased \
  --dataset_name squad \
  --do_train \
  --do_eval \
  --per_device_train_batch_size 8 \
  --learning_rate 3e-5 \
  --num_train_epochs 2 \
  --max_seq_length 384 \
  --doc_stride 128 \
  --output_dir ./output
```

### ä¸­æ–‡é—®ç­”è®­ç»ƒ

```bash
python run_qa.py \
  --model_name_or_path bert-base-chinese \
  --dataset_name cmrc2018 \
  --do_train \
  --do_eval \
  --per_device_train_batch_size 8 \
  --learning_rate 3e-5 \
  --num_train_epochs 3 \
  --max_seq_length 512 \
  --doc_stride 128 \
  --output_dir ./chinese_qa_model
```

### ä½¿ç”¨è‡ªå·±çš„æ•°æ®

å‡†å¤‡ JSON æ ¼å¼æ•°æ®ï¼š
```json
{
  "data": [
    {
      "title": "æ–‡æ¡£æ ‡é¢˜",
      "paragraphs": [
        {
          "context": "è¿™æ˜¯ä¸Šä¸‹æ–‡å†…å®¹...",
          "qas": [
            {
              "question": "é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ",
              "id": "1",
              "answers": [
                {
                  "text": "ç­”æ¡ˆ",
                  "answer_start": 5
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
```

è®­ç»ƒå‘½ä»¤ï¼š
```bash
python run_qa.py \
  --model_name_or_path bert-base-chinese \
  --train_file train.json \
  --validation_file val.json \
  --do_train \
  --do_eval \
  --per_device_train_batch_size 8 \
  --learning_rate 3e-5 \
  --num_train_epochs 3 \
  --max_seq_length 512 \
  --doc_stride 128 \
  --output_dir ./my_qa_model
```

---

## ğŸ“Š è®­ç»ƒå‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ | æ¨èå€¼ |
|------|------|--------|
| `model_name_or_path` | é¢„è®­ç»ƒæ¨¡å‹ | bert-base-chinese |
| `dataset_name` | æ•°æ®é›†åç§° | squad, cmrc2018 |
| `per_device_train_batch_size` | æ‰¹æ¬¡å¤§å° | 8 (GPU), 2 (CPU) |
| `learning_rate` | å­¦ä¹ ç‡ | 3e-5 |
| `num_train_epochs` | è®­ç»ƒè½®æ•° | 2-3 |
| `max_seq_length` | æœ€å¤§åºåˆ—é•¿åº¦ | 384-512 |
| `doc_stride` | æ–‡æ¡£æ»‘åŠ¨çª—å£ | 128 |

---

## ğŸ’¡ å¸¸è§é—®é¢˜

### 1. å†…å­˜ä¸è¶³

```bash
# å‡å°æ‰¹æ¬¡å¤§å°
--per_device_train_batch_size 4

# ä½¿ç”¨æ¢¯åº¦ç´¯ç§¯
--gradient_accumulation_steps 2

# å‡å°åºåˆ—é•¿åº¦
--max_seq_length 256
```

### 2. è®­ç»ƒå¤ªæ…¢

```bash
# ä½¿ç”¨æ··åˆç²¾åº¦
--fp16

# å‡å°‘æ•°æ®é‡ï¼ˆæµ‹è¯•ç”¨ï¼‰
--max_train_samples 1000
--max_eval_samples 100
```

### 3. ä½¿ç”¨ CPU è®­ç»ƒ

ç§»é™¤ `--fp16` å‚æ•°ï¼Œå¢åŠ è®­ç»ƒæ—¶é—´é¢„æœŸã€‚

---

## ğŸ¯ è¯„ä¼°æŒ‡æ ‡

è®­ç»ƒå®Œæˆåä¼šæ˜¾ç¤ºï¼š
- **Exact Match (EM)**: å®Œå…¨åŒ¹é…ç‡
- **F1 Score**: F1 åˆ†æ•°

BERT-base åœ¨ SQuAD ä¸Šçš„é¢„æœŸç»“æœï¼š
- EM: ~80-82%
- F1: ~88-90%

---

## ğŸ“ ä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹

### Python ä»£ç 

```python
from transformers import pipeline

qa = pipeline("question-answering", model="./my_qa_model")

result = qa(
    question="é—®é¢˜",
    context="åŒ…å«ç­”æ¡ˆçš„ä¸Šä¸‹æ–‡"
)

print(result['answer'])
```

### å‘½ä»¤è¡Œ

```bash
python ä½¿ç”¨æ¨¡å‹.py
```

---

## ğŸ”— ç›¸å…³èµ„æº

- [SQuAD æ•°æ®é›†](https://rajpurkar.github.io/SQuAD-explorer/)
- [CMRC2018 ä¸­æ–‡æ•°æ®é›†](https://github.com/ymcui/cmrc2018)
- [Hugging Face é—®ç­”æ•™ç¨‹](https://huggingface.co/docs/transformers/tasks/question_answering)

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿè¿è¡Œ `å¼€å§‹è®­ç»ƒ.bat` å¼€å§‹ä½ çš„ç¬¬ä¸€ä¸ªé—®ç­”æ¨¡å‹è®­ç»ƒï¼** ğŸš€
